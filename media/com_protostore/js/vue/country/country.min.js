// @license   http://www.gnu.org/licenses/gpl.html GNU/GPL
const p2s_country_form={data:()=>({base_url:"",currency:"",locale:"",form:{jform_id:"",jform_country_name:"",jform_country_isocode_2:"",jform_country_isocode_3:"",jform_taxrate:"",jform_requires_vat:!1,jform_published:!0},andClose:!1,successMessage:!1}),created(){},mounted(){},computed(){},async beforeMount(){this.setData();const e=document.getElementById("base_url");try{this.base_url=e.innerText,e.remove()}catch(e){}const t=document.getElementById("currency");try{this.currency=JSON.parse(t.innerText),t.remove()}catch(e){}const o=document.getElementById("locale");try{this.locale=o.innerText,o.remove()}catch(e){}const r=document.getElementById("successMessage");try{this.successMessage=r.innerText,r.remove()}catch(e){}},methods:{async saveItem(){const e=await fetch(this.base_url+"index.php?option=com_ajax&plugin=protostore_ajaxhelper&method=post&task=task&type=country.save&format=raw",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(this.form)}),t=await e.json();if(t.success)if(UIkit.notification({message:this.successMessage,status:"success",pos:"top-center",timeout:5e3}),this.andClose)window.location.href=this.base_url+"index.php?option=com_protostore&view=countries";else{const e=window.location.href;-1==e.indexOf("&id=")&&history.replaceState("","",e+"&id="+t.data.id),this.form.jform_id=t.data.id}else UIkit.notification({message:"There was an error.",status:"danger",pos:"top-center",timeout:5e3})},setData(){Object.keys(this.form).forEach((e=>{let t=document.getElementById(e+"_data");t&&(this.hasJsonStructure(t.innerText)?this.form[e]=JSON.parse(t.innerText):(this.form[e]=t.innerText,1==t.innerText&&(this.form[e]=!0),0==t.innerText&&(this.form[e]=!1)),t.remove())}))},hasJsonStructure(e){if("string"!=typeof e)return!1;try{const t=JSON.parse(e),o=Object.prototype.toString.call(t);return"[object Object]"===o||"[object Array]"===o}catch(e){return!1}}},components:{"p-inputswitch":primevue.inputswitch}};Vue.createApp(p2s_country_form).mount("#p2s_country_form");