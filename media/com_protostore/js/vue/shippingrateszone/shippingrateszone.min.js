// @license   http://www.gnu.org/licenses/gpl.html GNU/GPL
const p2s_shippingrateszone_form={data:()=>({base_url:"",form:{jform_id:"",jform_zone_id:"",jform_weight_from:"",jform_weight_to:"",jform_cost:"",jform_handling_cost:"",jform_published:""},andClose:!1,p2s_currency:[],p2s_local:!1}),mounted(){},computed:{},async beforeMount(){await this.setData();const e=document.getElementById("base_url");this.base_url=e.innerText,e.remove();const t=document.getElementById("currency");if(null!=t)try{this.p2s_currency=JSON.parse(t.innerText)}catch(e){}const o=document.getElementById("locale");if(null!=o)try{this.p2s_local=o.innerText}catch(e){}},methods:{async saveItem(){const e={itemid:this.form.jform_id,zone_id:this.form.jform_zone_id,weight_from:this.form.jform_weight_from,weight_to:this.form.jform_weight_to,cost:this.form.jform_cost,handling_cost:this.form.jform_handling_cost,published:this.form.jform_published?1:0},t=await fetch(this.base_url+"index.php?option=com_ajax&plugin=protostore_ajaxhelper&method=post&task=task&type=shippingrateszone.save&format=raw",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}),o=await t.json();if(o.success)if(UIkit.notification({message:"Saved!",status:"success",pos:"top-right",timeout:5e3}),this.andClose)window.location.href=this.base_url+"index.php?option=com_protostore&view=shippingrateszones";else{const e=window.location.href;-1==e.indexOf("&id=")&&history.replaceState("","",e+"&id="+o.data.id),this.form.jform_id=o.data.id}else UIkit.notification({message:"There was an error.",status:"danger",pos:"top-center",timeout:5e3})},setData(){Object.keys(this.form).forEach((e=>{let t=document.getElementById(e+"_data");t&&(this.hasJsonStructure(t.innerText)?(console.log(JSON.parse(t.innerText)),this.form[e]=JSON.parse(t.innerText)):(console.log(t),this.form[e]=t.innerText,"1"===t.innerText&&(this.form[e]=!0),"0"===t.innerText&&(this.form[e]=!1)))}))},hasJsonStructure(e){if("string"!=typeof e)return!1;try{const t=JSON.parse(e),o=Object.prototype.toString.call(t);return"[object Object]"===o||"[object Array]"===o}catch(e){return!1}},serialize(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")}},components:{"p-inputswitch":primevue.inputswitch,"p-inputnumber":primevue.inputnumber,"p-inputtext":primevue.inputtext,"p-calendar":primevue.calendar,"p-config":primevue.config}};Vue.createApp(p2s_shippingrateszone_form).mount("#p2s_shippingrateszone_form");