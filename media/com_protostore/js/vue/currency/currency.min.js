// @license   http://www.gnu.org/licenses/gpl.html GNU/GPL
const p2s_currency_form={data:()=>({form:{jform_id:"",jform_name:"",jform_iso:"",jform_currencysymbol:"",jform_rate:1,jform_default:"",jform_published:!0},andClose:!1,base_url:"",p2s_currency:[],p2s_locale:!1}),created(){},mounted(){},computed(){},async beforeMount(){await this.setData();const e=document.getElementById("base_url");this.base_url=e.innerText,e.remove();const t=document.getElementById("currency");t&&(this.p2s_currency=JSON.parse(t.innerText)),t.remove();const r=document.getElementById("locale");r&&(this.p2s_locale=r.innerText),r.remove();const o=document.getElementById("jform_rate_data");this.form.jform_rate=o?o.innerText:1},methods:{toggle(){this.hasErroraccess=!this.hasErroraccess},async saveItem(){const e={currency_id:this.form.jform_id,name:this.form.jform_name,currencysymbol:this.form.currencysymbol,iso:this.form.jform_iso,rate:this.form.jform_rate,default:this.form.jform_default?1:0,published:this.form.jform_published?1:0},t=await fetch(this.base_url+"index.php?option=com_ajax&plugin=protostore_ajaxhelper&method=post&task=task&type=currencies.save&format=raw",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(e)}),r=await t.json();if(r.success)if(UIkit.notification({message:"Saved!",status:"success",pos:"top-right",timeout:5e3}),this.andClose)window.location.href=this.base_url+"index.php?option=com_protostore&view=currencies";else{const e=window.location.href;-1==e.indexOf("&id=")&&history.replaceState("","",e+"&id="+r.data.id),this.form.jform_id=r.data.id,this.form.jform_name=r.data.name,this.form.jform_iso=r.data.iso,this.form.jform_currencysymbol=r.data.currencysymbol,this.form.jform_rate=r.data.rate}else UIkit.notification({message:"There was an error.",status:"danger",pos:"top-center",timeout:5e3});console.log(this.form)},async setData(){Object.keys(this.form).forEach((e=>{let t=document.getElementById(e+"_data");t&&(this.hasJsonStructure(t.innerText)?this.form[e]=JSON.parse(t.innerText):(this.form[e]=t.innerText,1==t.innerText&&(this.form[e]=!0),0==t.innerText&&(this.form[e]=!1)))}))},hasJsonStructure(e){if("string"!=typeof e)return!1;try{const t=JSON.parse(e),r=Object.prototype.toString.call(t);return"[object Object]"===r||"[object Array]"===r}catch(e){return!1}}},components:{"p-inputswitch":primevue.inputswitch}};Vue.createApp(p2s_currency_form).mount("#p2s_currency_form");